# ุฏููู ุชุนูู ุจุฑูุฌุฉ ุชุทุจูู ุชุญููู ุงูููุฏูู (yt-dlp Web GUI)

ูุฑุญุจุงู ุจู ูุฑุฉ ุฃุฎุฑู! ููุฏ ูููุง ุจุชุทููุฑ ุงูุชุทุจูู ุจุดูู ูุจูุฑ. ูุฐุง ุงูููู ูู ุงููุฑุฌุน ุงูุดุงูู ูุงูููุงุฆูุ ูุดุฑุญ ูู ุณุทุฑ ููุฏ ุจุงูุชูุตูู ุงูููู ูู ุงูุตูุฑุ ุจูุง ูู ุฐูู ุงูุชุนุฏููุงุช ุงูุฃุฎูุฑุฉ (ุงูุชุญูู ูู ุงูููุชุ ุงููุงุฌูุฉ ุงูุฐููุฉุ ูุนุฑุถ ุงููุฏุฉ).

---

## ๐๏ธ ุงููููู ุงูุนุงู ูููุดุฑูุน

ุงูุชุทุจูู ููุณู ุฅูู ุซูุงุซุฉ ุฃุฌุฒุงุก ุฑุฆูุณูุฉ ุชุนูู ูุนุงู:
1.  **Backend (`app.py`)**: ุงูุนูู ุงููุฏุจุฑ (Python). ูุณุชูุจู ุงูุฃูุงูุฑุ ูููุฐูุงุ ููุฑุณู ุงููุชุงุฆุฌ.
2.  **Frontend HTML (`index.html`)**: ุงููููู ุงูุนุธูู ููุตูุญุฉ (ุงูุฃุฒุฑุงุฑุ ุงููุฑุจุนุงุช).
3.  **Frontend CSS (`style.css`)**: ุงูููุงุจุณ ูุงููููุงุฌ (ุงูุฃููุงูุ ุงูุดููุ ุงูุชุตููู).

---

## 1๏ธโฃ ุงูุฌุฒุก ุงูุฃูู: ุงูุฎุงุฏู (Backend) - `app.py`

ูุฐุง ุงูููู ูู ุงููุณุคูู ุนู ุชุดุบูู ูู ุดูุก "ุฎูู ุงูููุงููุณ".

### ุงูููุชุจุงุช (Imports)
```python
import os
import subprocess
import json
import uuid
import threading
from flask import Flask, render_template, request, jsonify, send_file, after_this_request
```
*   `subprocess`: ุฃูู ููุชุจุฉ ููุง. ูู "ุงูุฑูููุช ููุชุฑูู" ุงูุฐู ูุณูุญ ููุง ุจุชุดุบูู ุจุฑูุงูุฌ `yt-dlp.exe` ูู ุฏุงุฎู ุงูุจุงูุซูู.
*   `Flask`: ูู "ุงูุฎุงุฏู" (Web Server) ุงูุฐู ูุฌุนู ููุฏ ุงูุจุงูุซูู ูุธูุฑ ูุตูุญุฉ ูุช.
*   `json`: ูุบุฉ ุงูุชูุงูู. ุนูุฏูุง ูุทูุจ ูู `yt-dlp` ูุนูููุงุช ุงูููุฏููุ ูุนุทููุง ุฅูุงูุง ุจุตูุบุฉ JSON.
*   `threading`: ูุณุชุฎุฏูู ูุชูุธูู ุงููููุงุช (ุญุฐููุง) ูู ุงูุฎูููุฉ ุฏูู ุชุนุทูู ุงููุณุชุฎุฏู.

### ุชุดุบูู ุงูุฎุงุฏู
```python
app = Flask(__name__)
YT_DLP_CMD = 'yt-dlp'
DOWNLOAD_FOLDER = os.path.join(os.getcwd(), 'downloads')

if not os.path.exists(DOWNLOAD_FOLDER):
    os.makedirs(DOWNLOAD_FOLDER)
```
*   ูุญุฏุฏ ููุงู ูุฌูุฏ ุงูุชูุฒููุงุช. ุฅุฐุง ูู ููู ููุฌูุฏุงูุ ูููู ุจุฅูุดุงุฆู ููุฑุงู.

### ุฏุงูุฉ ุฌูุจ ุงูุตูุบ (`/formats`) - **ุชู ุชุญุฏูุซูุง**
```python
@app.route('/formats', methods=['POST'])
def get_formats():
    url = request.json.get('url')
    # ... ุชุดุบูู ุงูุฃูุฑ yt-dlp -J ...
```
ุนูุฏูุง ุชุถุบุท "Check Formats"ุ ูุญุฏุซ ุงูุชุงูู ููุง:
1.  ูุดุบู `yt-dlp -J URL`. ูุฐุง ุงูุฃูุฑ ูุฌูุจ "ูุนูููุงุช" ุงูููุฏูู ููุท (JSON) ููุง ูุญููู.
2.  **ุงูููุชุฑุฉ ุงูุฐููุฉ (ุงูุฌุฏูุฏุฉ):**
    ```python
    vcodec = f.get('vcodec', 'unknown') # ุบูุฑูุง 'none' ูู 'unknown'
    ```
    *   ูู ุงูุณุงุจูุ ููุง ูุชุฌุงูู ุฃู ุตูุบุฉ ููุณ ููุง ููุฏ ููุฏูู ูุนุฑูู.
    *   ุงูุขูุ ุฅุฐุง ูุงู ุงูููุฏ "ูุฌูููุงู" (Unknown)ุ ูุนุชุจุฑู ููุจููุงู. ูุฐุง ุฃุตูุญ ูุดููุฉ ุงุฎุชูุงุก ุฌูุฏุงุช ุงูู `sd` ู `hd` ูู ููุณุจูู.

3.  **ูุฏุฉ ุงูููุฏูู (ุงูุฌุฏูุฏุฉ):**
    ```python
    duration_sec = data.get('duration', 0)
    duration_str = data.get('duration_string')
    ```
    *   ูุณุชุฎุฑุฌ ุทูู ุงูููุฏูู ุจุงูุซูุงูู (`duration`) ูุจุงููุต (`duration_string` ูุซู 05:30). ููุฑุณูููุง ููุตูุญุฉ ููุนุฑุถููุง ูููุณุชุฎุฏู.

4.  **ุฏูุฌ ุงููุนูููุงุช:** ูุฑุณู ูููุชุตูุญ ูุงุฆูุฉ ุงูุตูุบ + ูุฏุฉ ุงูููุฏูู.

### ุฏุงูุฉ ุงูุชุญููู (`/download`)
```python
@app.route('/download', methods=['POST'])
def download_video():
    # ... ุงุณุชูุงู ุงูุจูุงูุงุช ...
    file_id = str(uuid.uuid4()) # ุงุณู ุนุดูุงุฆู
    output_template = os.path.join(DOWNLOAD_FOLDER, f"{file_id}.%(ext)s")
    
    cmd = [YT_DLP_CMD, '-f', format_id, url, '-o', output_template]
    
    if start_time and end_time:
         cmd.extend(['--download-sections', f'*{start_time}-{end_time}'])
```
*   ููุง ูุฑูุจ ุฃูุฑ ุงูุชุญููู ุงูููุงุฆู.
*   `--download-sections *start-end`: ูุฐุง ูู ุงูุณุญุฑ ุงูุฐู ููุต ุงูููุฏูู ุจุฏูุฉ ูููุฒู ุงูุฌุฒุก ุงููุญุฏุฏ ููุท.
*   ูุญูุธ ุงูููู ุจุงุณู ุนุดูุงุฆู (UUID) ุญุชู ูู 10 ุฃุดุฎุงุต ุญูููุง ูู ููุณ ุงูููุชุ ูุง ุชุชุฏุงุฎู ูููุงุชูู.

---

## 2๏ธโฃ ุงูุฌุฒุก ุงูุซุงูู: ุงููุงุฌูุฉ (HTML) - `index.html`

ููุง ุชูุช ุฅุถุงูุฉ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ (ุงูุชุญูู ูู ุงูููุช ูููุงู ุนุฑุถ ุงููุฏุฉ).

### ุงููููู (Structure)
```html
<div class="card">
    <h1>Video Downloader</h1>
    <P>POWERED BY MOHAMED HAMDY</P> <!-- ุชู ุฅุถุงูุชู ูุฏููุงู -->
    
    <!-- ููุง ูุธูุฑ ููุช ุงูููุฏูู ุจูุงุณุทุฉ ุงูุฌุงูุงุณูุฑูุจุช -->
    
    <input id="startTime">
    <input id="endTime">
</div>
```

### ุงูุฌุงูุงุณูุฑูุจุช (The Brains of the Browser)

#### 1. ุนุฑุถ ุงููุฏุฉ ูู ุงูููุงู ุงูุตุญูุญ
```javascript
const durationDisplay = document.createElement('div');
// ... ุชูููู ุงูุฎุท ุจุงูุฃุฎุถุฑ ...

// ูุจุญุซ ุนู ุฌููุฉ "POWERED BY"
const poweredByText = Array.from(document.querySelectorAll('p'))
      .find(p => p.textContent.includes('POWERED BY'));

if (poweredByText) {
    poweredByText.after(durationDisplay);
}
```
*   ูุญู ูุง ููุชุจ ูุฏุฉ ุงูููุฏูู ูู ุงูู HTML ูุจุงุดุฑุฉ.
*   ุจุฏูุงู ูู ุฐููุ ูุจุญุซ ุจุงูููุฏ ุนู ุงูุณุทุฑ ุงูููุชูุจ ููู "POWERED BY..."ุ ููุญุดุฑ ุชุญุชู ุนูุตุฑุงู ุฌุฏูุฏุงู ุณููุชุจ ููู ุงููุฏุฉ ูุงุญูุงู.

#### 2. ุงูุฐูุงุก ูู ูุชุงุจุฉ ุงูููุช (Auto-Colon)
```javascript
function handleTimeInput(e) {
    // ...
    // ุฅุฐุง ูุงู ุงูููุฏูู ุฃูู ูู ุณุงุนุฉุ ููุชุจ ุงููุณุชุฎุฏู ุฑูููู
    if (currentVideoDuration < 3600 && val.length === 2 && !val.includes(':')) {
        val = val + ':'; // ุถู ููุทุชูู ุชููุงุฆูุงู
    }
}
```
*   ูุฐู ุงูููุฒุฉ ุชุฑูุญ ุงููุณุชุฎุฏู. ุจุฏูุงู ูู ูุชุงุจุฉ `0` `5` `Shift+:` `0` `0`. ููุชุจ ููุท `0` `5` ููููู ุงููููุน ุจุฅููุงู ุงูููุทุชูู ูู.

#### 3. ุงูุชุญูู ูู ุงูููุทู (Validation)
**ุฃ. ุงูุชุญูู ูู ุงูุซูุงูู:**
```javascript
if (seconds > 59) {
    input.style.borderColor = "red";
    input.setCustomValidity("Seconds cannot exceed 59");
}
```
*   ูุง ููุฌุฏ ุดูุก ุงุณูู "65 ุซุงููุฉ". ุฅุฐุง ูุชุจ ุงููุณุชุฎุฏู ุฐููุ ูุญูู ุงูุฅุทุงุฑ ูุฃุญูุฑ ููููุนู.

**ุจ. ุงูุชุญูู ูู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ (ุงูุฌุฏูุฏ):**
```javascript
const startSec = timeToSeconds(start_time);
const endSec = timeToSeconds(end_time);

if (endSec <= startSec) {
     showMessage("End time must be greater than Start time.", "error");
     return; // ุชููู! ูุง ุชุฑุณู ุงูุทูุจ
}
```
*   ูุจู ุฅุฑุณุงู ุงูุทูุจ ููุณูุฑูุฑุ ูุชุฃูุฏ: ูู ููุช ุงูููุงูุฉ ุฃูุจุฑ ูุนูุงู ูู ุงูุจุฏุงูุฉุ
*   ุฏุงูุฉ `timeToSeconds` ุญููุช ุงูุชูููุช (01:30) ุฅูู ุซูุงูู (90 ุซุงููุฉ) ููุณุชุทูุน ุงูููุงุฑูุฉ ุจูููู ุจุฑูุฌูุงู.

---

## 3๏ธโฃ ุงูุฌุฒุก ุงูุซุงูุซ: ุงูุชุตููู (CSS) - `style.css`

ููุง ุนุฏูุง ููุชุตููู "ุงููุฏูู" (ุงูููู ุงูุจููุณุฌู ูุงูุฎูููุฉ ุงูุฏุงููุฉ) ุจูุงุกู ุนูู ุทูุจู.

```css
body {
    background-image: radial-gradient(...); /* ุงูุฎูููุฉ ุงููุชุฏุฑุฌุฉ */
}

input:focus {
    border-color: var(--primary); /* ุงูููู ุงูุจููุณุฌู ุนูุฏ ุงูุถุบุท */
}
```
*   ูู ูุบูุฑ ุงููุซูุฑ ููุง ุจุฑูุฌูุงูุ ููุท ุงุณุชุนุฏูุง ุงูุฃููุงู ูุงูุชุฃุซูุฑุงุช ุงูุชู ููุช ุชุญุจูุง.

---
ูุฐุง ูู ูุดุฑูุนู ูุงููุงู! ุฅูู ุงูุขู ุชุทุจูู ููุจ ูุชูุงูู ููููุ ุฐูู ูู ุงูุชุนุงูู ูุน ุงููุฏุฎูุงุชุ ูุฃููู ูู ุงููุธูุฑ. ๐
